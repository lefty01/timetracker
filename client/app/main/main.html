<div ng-include="'components/navbar/navbar.html'"></div>

<header class="hero-unit" id="banner">
  <div class="container">
    <h1>ttTime</h1>
  </div>
</header>

<div class="container">
  <div class="row" ng-show="!isLoggedIn()">
    <h2>Please log in to use ttTime app</h2>
  </div>
  <div class="row" ng-show="isLoggedIn()">
    <div class="col-sm-12 col-md-8 col-md-offset-2">
      <h1 class="page-header">Add new entry</h1>
      <form name="newEntryForm" ng-submit="addEntry(newEntryForm)">
      <div class='col-md-4'>
        <div class="form-group">
          Date:
          <div class="input-group ">
             <input type="text" class="form-control" datepicker-popup="dd MMM yyyy" ng-model="newEntry.date" is-open="newEntry.datePickerOpened" ng-required="true" close-text="Close" />
              <span class="input-group-btn">
                <button type="button" class="btn btn-default" ng-click="openDatePicker($event, newEntry)"><i class="glyphicon glyphicon-calendar"></i></button>
              </span>
          </div>
        </div>
      </div>
      <div class='col-md-4'>
        <div class="form-group">
          Hours:
          <div class="input-group">
            <input class="form-control" type="number" ng-model="newEntry.hours" ng-required="true" min="0" max="24"/>
          </div>
        </div>
      </div>
      <div class='col-md-10'>
        <div class="form-group">
          Description:
          <div class="">
            <input class="form-control" type="text" ng-model="newEntry.desc" ng-required="true"/>
          </div>
        </div>
      </div>
      <div class='col-md-2'>
        <div class="form-group">
          &nbsp;
          <div class="input-group ">
            <button class="btn btn-primary" type="submit">ADD</button>
          </div>
        </div>
      </div>
      </form>
      <div class="row clearfix"></div>
      <h1 class="page-header">Work Entries:</h1>
      <form name="editEntryForm">
      <alert ng-show="!editEntryForm.$valid" type="danger">Please review your work entry. All fields are required, hours must be in 0-24 range.</alert>
      <ul class="list-group">
        <li class="list-group-item single-entry {{entry.colorClass}}" ng-repeat="entry in workEntries | orderBy:'date'" ng-class="{'edit-mode':entry.editMode }">

          <span ng-if="!entry.editMode">
            <strong>{{entry.date | date:'dd MMM yyyy'}}</strong> - {{entry.hours}} hours<br>
            <span class="text-muted">{{entry.desc}}</span>
          </span>

          <span ng-if="entry.editMode" class="start-edit-mode" ng-class="{'animate-edit-mode':entry.editMode }">
            <div class='col-md-4'>
              <div class="form-group">
                Date:
                <div class="input-group ">
                  <input type="text" class="form-control" datepicker-popup="dd MMM yyyy" ng-model="entry.date" is-open="entry.datePickerOpened" ng-required="true" close-text="Close" />
              <span class="input-group-btn">
                <button type="button" class="btn btn-default" ng-click="openDatePicker($event, entry)"><i class="glyphicon glyphicon-calendar"></i></button>
              </span>
                </div>
              </div>
            </div>
            <div class='col-md-4'>
              <div class="form-group">
                Hours:
                <div class="input-group">
                  <input class="form-control" type="number" ng-model="entry.hours" ng-required="true" min="0" max="24"/>
                </div>
              </div>
            </div>
            <div class='col-md-8'>
              <div class="form-group">
                Description:
                <div class="">
                  <input class="form-control" type="text" ng-model="entry.desc" ng-required="true"/>
                </div>
              </div>
            </div>
          </span>

          <a ng-click="updateEntry(entry, editEntryForm);" ng-if="entry.editMode" class="positive-green"><span class="glyphicon glyphicon-ok pull-right entry-action" ></span></a>
          <a ng-click="revertChanges(entry);" ng-if="entry.editMode"><span class="glyphicon glyphicon-chevron-left pull-right entry-action"></span></a>
          <a ng-click="deleteEntry(entry);" ng-if="!entry.editMode" class="trash"><span class="glyphicon glyphicon-trash pull-right entry-action"></span></a>
          <a ng-click="switchToEdit(entry)" tooltip="{{entry._id}}" ng-if="!entry.editMode"><span class="glyphicon glyphicon-edit pull-right entry-action"></span></a>

        </li>
      </ul>
      </form>
    </div>
  </div>
</div>

<footer class="footer">
  <div class="container">
      <p>ttTime | by Roman Mandryk</p>
  </div>
</footer>
